---
title: 服务器端渲染和客户端渲染
key: 20180411
tags: 服务端渲染 客户端渲染 前后端分离
---

>QQ的延时大约1秒。1秒钟，键盘要将用户输入读入内存，内存加载到CPU，CPU运算后，编码成二进制传到网卡，通过网口从网线输出，光纤信号载入路由器，经过路由器数据转发最终通过光缆绕过几百个电线杆到达最近的电信，通过电信的服务器，电信匹配IP地址，之后二进制信息会经过千万个电信服务器 节点，最终到达位于深圳的腾讯服务器，经过腾讯服务器的后台程序进行一系列复杂运算匹配接收用户，以同样方式，经过千万个网络节点，千万个电线杆，毫秒之间横跨半个中国穿越8000多公里，最终光纤信号进入路由器通过振荡电路变为交变电磁场放射成5.0GHZ的WIFI连接到手机，手机CPU解码将信息传到QQ应用，然后，调用GPU渲染成图像。   ————这一过程仅用了1秒。

<!--more-->

## 什么是服务器端渲染和客户端渲染？

互联网早期，用户使用浏览器浏览的都是一些没有复杂逻辑的、简单的页面，这些页面都是在后端将`html`拼接好的然后将之返回给前端完整的`html`文浏览器拿到这个`html`文件之后就可以直接解析展示了，而这也就是所谓的服务器端渲染了。而随着前端页面的复杂性提高，前端就不仅仅是普通的页面了，而可能添加了更多功能性的组件，复杂性更大，另外，彼时`ajax`的兴起，使得业界就开始推崇前后端分离的开发模式，即后端不提供完整的`html`页而是提供一些`API`使得前端可以获取到`json`数据，然后前端拿到`json`数据之后再在前端进行`html`页面的拼接，然后展示在浏览器上，这就是所谓的客户染了，这样前端就可以专注`UI`的开发，后端专注于逻辑的开发。
{:.info}

　　
## 两者本质的区别是什么？

客户端渲染和服务器端渲染的最重要的区别就是究竟是谁来完成`html`文件的完整拼接，如果是在服务器端完成的，然后返回给客户端，就是服务器端渲染，而如果是前端做了更多的工作完成了`html`的拼接，则就是客户端渲染。
{:.info}

 
## 服务器端渲染的优缺点是怎样的？

`优点：`{:.success}

1. 前端耗时少。因为后端拼接完了`html`，浏览器只需要直接渲染出来。
2. 有利于`SEO`。因为在后端有完整的`html`页面，所以爬虫更容易爬取获得信息，更有利于`SEO`。
3. 无需占用客户端资源。即解析模板的工作完全交由后端来做，客户端只要解析标准的`html`页面即可，这样对于客户端的资源占用更少，尤其是移动端，也可以更省电。
4. 后端生成静态化文件。即生成缓存片段，这样就可以减少数据库查询浪费的时间了，且对于数据变化不大的页面非常高效 。

`缺点：`{:.error}
1. 不利于前后端分离，开发效率低。使用服务器端渲染，则无法进行分工合作，则对于前端复杂度高的项目，不利于项目高效开发。另外，如果是服务器端渲染，则前端一般就是写一个静态`html`文件，然后后端再修改为模板，这样是非常低效的，并且还常常需要前后端共同完成修改的动作； 或者是前端直接完成`html`模板，然后交由后端。另外，如果后端改了模板，前端还需要根据改动的模板再调节`css`，这样使得前后端联调的时间增加。
2. 占用服务器端资源。即服务器端完成`html`模板的解析，如果请求较多，会对服务器造成一定的访问压力。而如果使用前端渲染，就是把这些解析的压力分摊了前端，而这里确实完全交给了一个服务器。
 

## 客户端渲染的优缺点是怎样的？

`优点：`{:.success}　　
1. 前后端分离。前端专注于前端`UI`，后端专注于`API`开发，且前端有更多的选择性，而不需要遵循后端特定的模板。
2. 体验更好。比如，我们将网站做成`SPA`或者部分内容做成`SPA`，这样，尤其是移动端，可以使体验更接近于原生app。

`缺点：`{:.error}
1. 前端响应较慢。如果是客户端渲染，前端还要进行拼接字符串的过程，需要耗费额外的时间，不如服务器端渲染速度快。
2. 不利于`SEO`。目前比如百度、谷歌的爬虫对于`SPA`都是不认的，只是记录了一个页面，所以`SEO`很差。因为服务器端可能没有保存完整的`html`，而是前端通过`js`进行`dom`的拼接，那么爬虫无法爬取信息。 除非搜索引擎的`SEO`可以增加对于`JavaScript`的爬取能力，这才能保证`SEO`。
 

 

## 使用服务器端渲染还是客户端渲染？

不谈业务场景而盲目选择使用何种渲染方式都是耍流氓。比如企业级网站，主要功能是展示而没有复杂的交互，并且需要良好的`SEO`，则这时我们就需要使用服务器端渲染；而类似后台管理页面，交互性比较强，不需要`SEO`的考虑，那么就可以使用客户端渲染。
{:.warning}

另外，具体使用何种渲染方法并不是绝对的，比如现在一些网站采用了首屏服务器端渲染，即对于用户最开始打开的那个页面采用的是服务器端渲染，这样就保证了渲染速度，而其他的页面采用客户端渲染，这样就完成了前后端分离。
{:.info}

 
## 对于前后端分离，如何进行SEO优化？

如果进行了前后端分离，那么前端就是通过js来修改dom使得`html`拼接完全，然后再显示，或者是使用`SPA`，这样，`SEO`几乎没有。那么这种情况下如何做`SEO`优化呢？
{:.warning}

我们可以自行提交`sitemap`，让蜘蛛主动去爬取，但是遇到了`sitemap`中的`url`，达到指定页面之后只有元js怎么办呢？这是我们可以使用`<noscript>`标签来进行简单的优化，比如打印出当前页面信息的一些关键的信息点，但是正常用户并不需要这些，会造成额外的负担，且前端可以判断是否支持`JavaScript`，而后段不行，只好根据百度的`spider`做`UA`判断，使用`phantomjs或`者`nginx`代理，来对`spider`访问的页面进行特殊的处理，达到被收录的效果。但这种效果还是不好。。。
{:.info}

而目前的`react`和`vue`都提供了`SSR`，即服务器端渲染，这也就是提供`SEO`不好的解决方式了。
{:.info}


## 究竟如何理解前后端分离？

实际上，时至今日，前后端分离一定是必然或者趋势，因为早期在 `Web1.0` 时代的网页就是简单的网页，而如今的网页越来越朝向app前进，而前后端分离就是实现app的必然的结果。所以，我们可以认为 `html` 、 `css` 、`JavaScript` 组成了这个 `app` ，然后浏览器作为虚拟机来运行这些程序，即浏览器成为了app的运行环境，成了客户端，总的来说就是当前的前端越来越朝向桌面应用或者说是手机上的app发展了，而比如说电脑上的qq可以服务器端渲染吗？肯定不能！所以前后端分离也就成了必然。而我们目前接触额前端工程化、编译（转译）、各种 MVC/MVVM 框架、依赖工具、npm、bable、webpack 等等看似很新鲜、创新的东西实际上都是传统桌面开发所形成的概念，只是近年来前端发展较快而借鉴过来的，本质上就是开源社区东平西凑做出来的一个visual studio。
{:.success}

模版式的服务端编程早就进了垃圾堆。一些公司的后端实现甚至都不加载 `HTML` 模版引擎，进出的数据都是 `JSON`（ HTML / Javascript 内容怎么办？单独编译，然后部署到 S3 上）现在的服务器渲染的目的只是为了加速和搜索引擎优化（准确的说是非`Google`引擎优化，因为`Google`可以解析`Javascript`动态网页）。而实现也很简单：拿个浏览器核心跑一下`app`然后把生成的`html`存起来给搜索爬虫就行了。与其说是渲染，不如说是`“快照”`，就像给`app`截图一样。
{:.success}

> **Web 2.0** 时代最大的思想革命本质不是前后端分离，而是把网页当作独立的应用程序（app）。前后端分离只是实现这一新架构的必然结果。

参考：[服务器端渲染和客户端渲染](https://www.cnblogs.com/zhuzhenwei918/p/8795945.html)
